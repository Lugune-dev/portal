import{a as H,b as R,c as F}from"./chunk-U3CUYTE4.js";import"./chunk-3CQ75ST4.js";import{$ as i,$a as g,Ea as S,G as w,Ha as M,I as p,J as s,Ja as P,Q as c,R as _,Ta as I,Ua as k,W as f,Wa as m,_ as l,_a as E,aa as n,ba as d,eb as D,hb as T,ia as A,ja as C,ka as x,nb as L,qb as j,ua as r,v,va as u,w as h,wa as O,x as b,y}from"./chunk-ZQSPQ25S.js";function B(o,t){o&1&&(i(0,"div",19),d(1,"div",20),n())}function V(o,t){if(o&1){let e=A();i(0,"div",21),d(1,"i",22),i(2,"h3",23),r(3,"Failed to Load Advertisements"),n(),i(4,"p",24),r(5,"Please try again later or contact support if the problem persists."),n(),i(6,"button",25),C("click",function(){v(e);let U=x();return h(U.fetchAdvertisements())}),r(7," Retry "),n()()}}function z(o,t){if(o&1&&(i(0,"div",29)(1,"div",30)(2,"div",31),d(3,"img",32),i(4,"div",33),r(5,"New"),n()(),i(6,"div",34)(7,"h3",35),r(8),n(),i(9,"p",36),r(10),n(),i(11,"div",37)(12,"span",38),d(13,"i",39),r(14),M(15,"date"),n(),i(16,"div",40)(17,"a",41),r(18," Read More "),b(),i(19,"svg",42),d(20,"path",43),n()(),y(),i(21,"a",44),r(22,"Details"),n()()()()()()),o&2){let e=t.$implicit;s(3),l("src",e.imageUrl?"https://tphpa-api.onrender.com"+e.imageUrl:"assets/images/air.jpg",p)("alt",e.title),s(5),u(e.title),s(2),u(e.description),s(4),O(" ",P(15,7,e.endDate,"mediumDate")),s(3),l("href",e.linkUrl,p),s(4),l("href",e.linkUrl,p)}}function J(o,t){if(o&1&&(i(0,"div",26)(1,"ngx-slick-carousel",27),f(2,z,23,10,"div",28),n()()),o&2){let e=x();s(),l("config",e.slickConfig),s(),l("ngForOf",e.activeAds)}}function X(o,t){o&1&&(i(0,"div",45),d(1,"i",46),i(2,"h3",47),r(3,"No Current Advertisements"),n(),i(4,"p",48),r(5,"Check back later for the latest news and updates."),n()())}var N=class o{constructor(t,e,a){this.http=t;this.platformId=e;this.datePipe=a}slickConfig={slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!0,dots:!0,arrows:!0,infinite:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:1}}]};adsLoading=!0;adsError=!1;activeAds=[];adsSlideIntervalMs=3500;showAdsDebug=!0;lastAdsResponse=null;lastAdsJson="";swiperAutoplay={delay:this.adsSlideIntervalMs,disableOnInteraction:!1,pauseOnMouseEnter:!0};ngOnInit(){g(this.platformId)&&this.fetchAdvertisements()}ngAfterViewInit(){if(g(this.platformId)&&this.showAdsDebug){let t=document.getElementById("ads-page-wrapper");if(t){let e=document.createElement("pre");e.id="ads-page-debug-pre",e.style.maxHeight="220px",e.style.overflow="auto",e.style.background="white",e.style.padding="8px",e.style.border="1px solid #f5f5f5",e.style.fontSize="12px",e.textContent=this.lastAdsJson||"no ads response yet",t.insertBefore(e,t.firstChild)}}}ngOnDestroy(){}fetchAdvertisements(){this.adsLoading=!0,this.adsError=!1,this.http.get("https://portal-api-z927.onrender.com/api/advertisements").subscribe({next:t=>{console.debug("[Ads page] /api/advertisements response:",t),this.lastAdsResponse=t;try{this.lastAdsJson=JSON.stringify(t,null,2)}catch{this.lastAdsJson=String(t)}let e=new Date;if(e.setHours(0,0,0,0),console.debug("[Ads page] total ads from server:",Array.isArray(t.data)?t.data.length:0),this.activeAds=t.data.filter(a=>a.isActive&&new Date(a.endDate)>=e).slice(0,12),this.activeAds.length===0&&Array.isArray(t.data)&&t.data.length>0&&(console.warn("[Ads page] Advertisement filter removed all items; falling back to unfiltered list for display."),this.activeAds=t.data.slice(0,12)),console.debug("[Ads page] activeAds after filter:",this.activeAds),console.log("[Ads page] Active ads loaded:",this.activeAds.length),g(this.platformId)){let a=document.getElementById("ads-page-debug-pre");a&&(a.textContent=this.lastAdsJson)}this.adsLoading=!1},error:t=>{console.error("[Ads page] Failed to fetch ads:",t),this.adsError=!0,this.adsLoading=!1}})}startAdsAutoScroll(){}stopAdsAutoScroll(){}static \u0275fac=function(e){return new(e||o)(c(D),c(w),c(m))};static \u0275cmp=_({type:o,selectors:[["app-advertisements"]],features:[S([m])],decls:26,vars:4,consts:[[1,"min-h-screen","bg-gray-50"],[1,"bg-gradient-to-r","from-primary-600","to-primary-700","text-white","py-16"],[1,"container","mx-auto","px-4","text-center"],[1,"text-4xl","md:text-5xl","font-bold","mb-4"],[1,"text-xl","max-w-3xl","mx-auto"],[1,"py-16"],[1,"container","mx-auto","px-4"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-lg p-6 max-w-2xl mx-auto text-center",4,"ngIf"],["id","ads-page-wrapper","class","max-w-7xl mx-auto",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"py-16","bg-gradient-to-r","from-primary-600","to-primary-700","text-white"],[1,"text-3xl","md:text-4xl","font-bold","mb-6"],[1,"text-lg","max-w-2xl","mx-auto","mb-8"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-center"],["routerLink","/login",1,"bg-white","text-primary-600","hover:bg-gray-100","font-bold","py-3","px-6","rounded-full","transition-all","duration-300","transform","hover:scale-105","shadow-lg"],[1,"ml-2","fas","fa-sign-in-alt"],["routerLink","/",1,"border-2","border-white","text-white","hover:bg-white","hover:text-primary-600","font-bold","py-3","px-6","rounded-full","transition-all","duration-300"],[1,"ml-2","fas","fa-home"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary-500"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","max-w-2xl","mx-auto","text-center"],[1,"fas","fa-exclamation-triangle","text-red-500","text-2xl","mb-3"],[1,"text-lg","font-semibold","text-red-800","mb-2"],[1,"text-red-600"],[1,"mt-4","bg-red","hover:bg-red","text-white","px-4","py-2","rounded-lg","transition-colors","duration-200",3,"click"],["id","ads-page-wrapper",1,"max-w-7xl","mx-auto"],["aria-label","Advertisements carousel",3,"config"],["ngxSlickItem","","class","px-2",4,"ngFor","ngForOf"],["ngxSlickItem","",1,"px-2"],[1,"bg-white","rounded-xl","overflow-hidden","shadow-lg","hover:shadow-xl","transition-shadow","duration-300"],[1,"relative","h-48","overflow-hidden"],["onerror","this.src='https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80'",1,"w-full","h-full","object-cover","transition-transform","duration-500","hover:scale-110",3,"src","alt"],[1,"absolute","top-4","left-4","bg-primary-500","text-white","text-sm","font-bold","px-3","py-1","rounded-full"],[1,"p-6"],[1,"text-xl","font-bold","text-gray-800","mb-2","truncate"],[1,"text-gray-600","mb-4","line-clamp-3"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500"],[1,"far","fa-calendar","mr-1"],[1,"flex","items-center","gap-3"],["target","_blank",1,"inline-flex","items-center","gap-2","bg-primary-500","hover:bg-primary-600","text-white","px-3","py-2","rounded-full","font-medium","transition-colors","duration-200",3,"href"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M12.293 5.293a1 1 0 011.414 1.414L10.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4z"],["target","_blank",1,"text-primary-600","hover:text-primary-800","text-sm","font-semibold",3,"href"],[1,"text-center","py-12"],[1,"fas","fa-newspaper","text-gray-400","text-4xl","mb-4"],[1,"text-xl","font-semibold","text-gray-600","mb-2"],[1,"text-gray-500"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"section",1)(2,"div",2)(3,"h1",3),r(4,"Latest News & Advertisements"),n(),i(5,"p",4),r(6," Stay informed with the latest announcements, events, and agricultural developments from TPHPA. "),n()()(),i(7,"section",5)(8,"div",6),f(9,B,2,0,"div",7)(10,V,8,0,"div",8)(11,J,3,2,"div",9)(12,X,6,0,"div",10),n()(),i(13,"div",11)(14,"div",2)(15,"h2",12),r(16,"Stay Connected"),n(),i(17,"p",13),r(18," Get the latest updates and announcements delivered directly to your inbox. "),n(),i(19,"div",14)(20,"a",15),r(21," Sign In to Access "),d(22,"i",16),n(),i(23,"a",17),r(24," Back to Home "),d(25,"i",18),n()()()()()),e&2&&(s(9),l("ngIf",a.adsLoading),s(),l("ngIf",a.adsError),s(),l("ngIf",!a.adsLoading&&!a.adsError&&a.activeAds.length>0),s(),l("ngIf",!a.adsLoading&&!a.adsError&&a.activeAds.length===0))},dependencies:[E,I,k,T,j,L,F,H,R,m],styles:[".line-clamp-3[_ngcontent-%COMP%]{line-clamp:3;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.owl-theme[_ngcontent-%COMP%]   .owl-nav[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.owl-theme[_ngcontent-%COMP%]   .owl-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#1f2937!important;color:#fff!important;border-radius:50%!important;width:40px!important;height:40px!important;margin:0 5px!important;transition:all .3s ease!important;border:none!important;display:inline-flex!important;align-items:center!important;justify-content:center!important}.owl-theme[_ngcontent-%COMP%]   .owl-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#059669!important;transform:scale(1.1)}.owl-theme[_ngcontent-%COMP%]   .owl-dots[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.owl-theme[_ngcontent-%COMP%]   .owl-dots[_ngcontent-%COMP%]   .owl-dot[_ngcontent-%COMP%]{display:inline-block;margin:0 5px}.owl-theme[_ngcontent-%COMP%]   .owl-dots[_ngcontent-%COMP%]   .owl-dot[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:12px;height:12px;background:#d1d5db;border-radius:50%;display:block;transition:all .3s ease}.owl-theme[_ngcontent-%COMP%]   .owl-dots[_ngcontent-%COMP%]   .owl-dot.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#059669;transform:scale(1.2)}.owl-theme[_ngcontent-%COMP%]   .owl-dots[_ngcontent-%COMP%]   .owl-dot[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{background:#059669}.animated[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:both}.slideOutDown[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideOutDown}.flipInX[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_flipInX}@keyframes _ngcontent-%COMP%_slideOutDown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(100%)}}@keyframes _ngcontent-%COMP%_flipInX{0%{opacity:0;transform:perspective(400px) rotateX(90deg)}to{opacity:1;transform:perspective(400px) rotateX(0)}}"]})};export{N as Advertisements};
