import{c as y,d as u,e as F,f as S,i as E,k as I,l as M,p as N,r as T}from"./chunk-3CQ75ST4.js";import{a as k}from"./chunk-N5RQHMOU.js";import{$ as o,J as a,Q as f,R as _,Ua as x,W as m,_ as d,_a as C,aa as n,ba as c,ja as h,ka as w,sa as b,ua as s,wa as P}from"./chunk-ZQSPQ25S.js";function L(t,i){t&1&&(o(0,"div",18),s(1," Current password is required "),n())}function q(t,i){t&1&&(o(0,"div"),s(1,"New password is required"),n())}function A(t,i){t&1&&(o(0,"div"),s(1,"Password must be at least 6 characters"),n())}function G(t,i){if(t&1&&(o(0,"div",18),m(1,q,2,0,"div",19)(2,A,2,0,"div",19),n()),t&2){let r,e,l=w();a(),d("ngIf",(r=l.changePasswordForm.get("newPassword"))==null||r.errors==null?null:r.errors.required),a(),d("ngIf",(e=l.changePasswordForm.get("newPassword"))==null||e.errors==null?null:e.errors.minlength)}}function B(t,i){t&1&&(o(0,"div"),s(1,"Please confirm your new password"),n())}function D(t,i){if(t&1&&(o(0,"div",18),m(1,B,2,0,"div",19),n()),t&2){let r,e=w();a(),d("ngIf",(r=e.changePasswordForm.get("confirmPassword"))==null||r.errors==null?null:r.errors.required)}}function V(t,i){t&1&&(o(0,"div",18),s(1," Passwords do not match "),n())}function j(t,i){if(t&1&&(o(0,"div",20)(1,"p",21),s(2),n()()),t&2){let r=w();a(),b("text-green-600",r.message.includes("successfully"))("text-red-600",!r.message.includes("successfully")),a(),P(" ",r.message," ")}}function z(t,i){t&1&&c(0,"span",22)}var O=class t{constructor(i,r){this.fb=i;this.authService=r;this.initializeForm()}changePasswordForm;isLoading=!1;message="";initializeForm(){this.changePasswordForm=this.fb.group({currentPassword:["",[u.required]],newPassword:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(i){let r=i.get("newPassword")?.value,e=i.get("confirmPassword")?.value;return r===e?null:{mismatch:!0}}onSubmit(){if(this.changePasswordForm.invalid){this.changePasswordForm.markAllAsTouched();return}this.isLoading=!0,this.message="";let{currentPassword:i,newPassword:r}=this.changePasswordForm.value;this.authService.changePassword(i,r).subscribe({next:e=>{this.isLoading=!1,e.success?(this.message="Password changed successfully!",this.changePasswordForm.reset()):this.message=e.message||"Failed to change password."},error:e=>{this.isLoading=!1,this.message="An error occurred. Please try again.",console.error("Change password error:",e)}})}onBack(){}static \u0275fac=function(r){return new(r||t)(f(N),f(k))};static \u0275cmp=_({type:t,selectors:[["app-change-password"]],decls:31,vars:9,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-600","to-green-700","flex","items-center","justify-center","p-4"],[1,"bg-white","rounded-2xl","shadow-xl","border","border-gray-100","w-full","max-w-md","p-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-600"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","currentPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","currentPassword","formControlName","currentPassword","placeholder","Enter current password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["class","text-red-600 text-sm mt-1",4,"ngIf"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter new password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm new password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200"],["class","text-center",4,"ngIf"],["type","submit",1,"w-full","px-6","py-3","bg-green-900","text-white","rounded-lg","font-medium","hover:bg-green-900","transition-colors","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center",3,"disabled"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2",4,"ngIf"],[1,"text-center","mt-6"],["type","button",1,"text-green-900","hover:text-blue-800","font-medium","transition-colors","duration-200",3,"click"],[1,"text-red-600","text-sm","mt-1"],[4,"ngIf"],[1,"text-center"],[1,"text-sm"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"]],template:function(r,e){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Change Password"),n(),o(5,"p",4),s(6,"Update your account password"),n()(),o(7,"form",5),h("ngSubmit",function(){return e.onSubmit()}),o(8,"div")(9,"label",6),s(10," Current Password "),n(),c(11,"input",7),m(12,L,2,0,"div",8),n(),o(13,"div")(14,"label",9),s(15," New Password "),n(),c(16,"input",10),m(17,G,3,2,"div",8),n(),o(18,"div")(19,"label",11),s(20," Confirm New Password "),n(),c(21,"input",12),m(22,D,2,1,"div",8)(23,V,2,0,"div",8),n(),m(24,j,3,5,"div",13),o(25,"button",14),m(26,z,1,0,"span",15),s(27),n()(),o(28,"div",16)(29,"button",17),h("click",function(){return e.onBack()}),s(30," \u2190 Back to Dashboard "),n()()()()),r&2){let l,p,g,v;a(7),d("formGroup",e.changePasswordForm),a(5),d("ngIf",((l=e.changePasswordForm.get("currentPassword"))==null?null:l.invalid)&&((l=e.changePasswordForm.get("currentPassword"))==null?null:l.touched)),a(5),d("ngIf",((p=e.changePasswordForm.get("newPassword"))==null?null:p.invalid)&&((p=e.changePasswordForm.get("newPassword"))==null?null:p.touched)),a(5),d("ngIf",((g=e.changePasswordForm.get("confirmPassword"))==null?null:g.invalid)&&((g=e.changePasswordForm.get("confirmPassword"))==null?null:g.touched)),a(),d("ngIf",(e.changePasswordForm.errors==null?null:e.changePasswordForm.errors.mismatch)&&((v=e.changePasswordForm.get("confirmPassword"))==null?null:v.touched)),a(),d("ngIf",e.message),a(),d("disabled",e.changePasswordForm.invalid||e.isLoading),a(),d("ngIf",e.isLoading),a(),P(" ",e.isLoading?"Changing...":"Change Password"," ")}},dependencies:[C,x,T,E,y,F,S,I,M],styles:["@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #3b82f61a}button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.text-green-600[_ngcontent-%COMP%]{color:#16a34a}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.text-blue-600[_ngcontent-%COMP%]:hover{color:#2563eb}"]})};export{O as a};
