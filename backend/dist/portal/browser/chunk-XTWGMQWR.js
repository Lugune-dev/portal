import{a as K}from"./chunk-TYAXEZWJ.js";import{c as V,d as c,e as z,f as A,i as D,k as q,l as j,m as G,n as L,o as H,p as $,r as B}from"./chunk-3CQ75ST4.js";import{$ as i,J as l,Q as b,R as M,Ta as k,Ua as E,W as m,_ as s,_a as F,aa as e,ba as p,db as C,e as J,eb as R,hb as I,ia as O,ja as x,ka as v,mb as U,nb as T,qb as N,sa as S,ta as P,ua as o,v as w,va as h,w as y,wa as _}from"./chunk-ZQSPQ25S.js";var W=J(K());function Q(r,a){if(r&1){let n=O();i(0,"button",40),x("click",function(){let d=w(n).$implicit,g=v();return y(g.setActiveSidebar(d))}),p(1,"i"),o(2),e()}if(r&2){let n=a.$implicit;S("active",n.active),s("routerLink",n.route),l(),P(n.icon),l(),_(" ",n.label," ")}}function X(r,a){if(r&1&&(i(0,"div",41),o(1),e()),r&2){let n=v();l(),h(n.errorMessage)}}function Z(r,a){r&1&&(i(0,"div",42),o(1,"Name is required."),e())}function ee(r,a){r&1&&(i(0,"span"),o(1,"Email is required."),e())}function te(r,a){r&1&&(i(0,"span"),o(1,"Invalid email format."),e())}function ne(r,a){if(r&1&&(i(0,"div",42),m(1,ee,2,0,"span",43)(2,te,2,0,"span",43),e()),r&2){let n,t,d=v();l(),s("ngIf",(n=d.userForm.get("email"))==null||n.errors==null?null:n.errors.required),l(),s("ngIf",(t=d.userForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function re(r,a){r&1&&(i(0,"div",42),o(1," Password is required and must be at least 8 characters. "),e())}function ie(r,a){if(r&1&&(i(0,"option",44),o(1),e()),r&2){let n=a.$implicit;s("value",n.value),l(),h(n.viewValue)}}function oe(r,a){r&1&&(i(0,"div",42),o(1,"Role is required."),e())}function ae(r,a){if(r&1&&(i(0,"option",45),o(1),e()),r&2){let n=a.$implicit;s("ngValue",n.id),l(),h(n.name)}}function le(r,a){r&1&&p(0,"span",46)}var Y=class r{constructor(a,n,t){this.fb=a;this.http=n;this.router=t;this.userForm=this.fb.group({name:["",c.required],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(8)]],title:[""],directorate:[""],unit:[""],role:["",c.required],reports_to_id:[null]})}userForm;roles=[{value:"admin",viewValue:"Admin"},{value:"director_general",viewValue:"Director General"},{value:"director",viewValue:"Director"},{value:"manager",viewValue:"Manager"},{value:"staff_officer",viewValue:"Staff Officer"},{value:"support_officer",viewValue:"Support Officer"}];reportsToUsers=[];errorMessage=null;loading=!1;sidebarItems=[{icon:"fas fa-tachometer-alt",label:"Dashboard",active:!1,route:"/admin/dashboard"},{icon:"fas fa-bullhorn",label:"Advertisements",active:!1,route:"/admin/advertisements"},{icon:"fas fa-users",label:"User List",active:!1,route:"/admin/user-list"},{icon:"fas fa-user-plus",label:"Register User",active:!0,route:"/admin/user-registration"},{icon:"fas fa-chart-bar",label:"Reports",active:!1,route:"/admin/reports"},{icon:"fas fa-cog",label:"Settings",active:!1,route:"/admin/settings"}];ngOnInit(){this.fetchReportsToUsers()}fetchReportsToUsers(){let a=localStorage.getItem("auth_token"),n=new C().set("Authorization",`Bearer ${a}`);this.http.get("https://portal-api-z927.onrender.com/api/admin/reports-to",{headers:n}).subscribe({next:t=>{this.reportsToUsers=t},error:t=>{console.error("Failed to fetch reports-to list",t),this.errorMessage="Failed to load supervisor list."}})}onSubmit(){if(this.errorMessage=null,this.loading=!0,this.userForm.invalid){this.loading=!1,this.userForm.markAllAsTouched();return}let a=localStorage.getItem("auth_token"),n=new C().set("Authorization",`Bearer ${a}`);this.http.post("https://portal-api-z927.onrender.com/api/admin/register-user",this.userForm.value,{headers:n}).subscribe({next:t=>{W.default.fire({icon:"success",title:"Success!",text:t.message}),this.userForm.reset(),this.loading=!1},error:t=>{this.errorMessage=t.error?.message||"User registration failed.",this.loading=!1}})}setActiveSidebar(a){this.sidebarItems.forEach(n=>n.active=!1),a.active=!0}logout(){this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||r)(b($),b(R),b(U))};static \u0275cmp=M({type:r,selectors:[["app-user-registration"]],decls:70,vars:14,consts:[[1,"dashboard-container"],[1,"w-72","bg-gradient-to-br","from-gray-600","to-green-700","text-white","p-8","shadow-xl","fixed","h-full","left-0","top-0","overflow-y-auto","z-50"],["class","sidebar-btn",3,"active","routerLink","click",4,"ngFor","ngForOf"],[1,"main-content"],[1,"content-header"],[1,"auth-section"],[1,"text-gray-700","font-semibold","bg-gradient-to-r","from-gray-600","to-green-700","bg-clip-text","text-transparent"],[1,"w-11","h-11","rounded-full","bg-gradient-to-r","from-gray-600","to-green-700","text-white","flex","items-center","justify-center","font-bold","cursor-pointer","transition-all","duration-300","hover:scale-110","shadow-md","border-2","border-white/30"],[1,"px-5","py-2.5","bg-gradient-to-r","from-gray-600","to-green-700","text-white","border-none","rounded-xl","font-semibold","cursor-pointer","transition-all","duration-300","hover:from-gray-700","hover:to-green-800","hover:shadow-lg","hover:-translate-y-0.5","overflow-hidden","relative",3,"click"],[1,"view-content"],[1,"container","mt-5"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-6","mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Enter full name",1,"form-control"],["class","text-danger small",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter email address",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter temporary password",1,"form-control"],["for","role",1,"form-label"],["id","role","formControlName","role",1,"form-select"],["disabled","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","e.g., Director, Manager, Staff",1,"form-control"],["for","directorate",1,"form-label"],["type","text","id","directorate","formControlName","directorate","placeholder","e.g., Corporate Services Directorate",1,"form-control"],["for","unit",1,"form-label"],["type","text","id","unit","formControlName","unit","placeholder","e.g., Administration Section",1,"form-control"],[1,"mb-3"],["for","reports_to_id",1,"form-label"],["id","reports_to_id","formControlName","reports_to_id",1,"form-select"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit",1,"px-5","py-2.5","bg-gradient-to-r","from-gray-600","to-green-700","text-white","border-none","rounded-xl","font-semibold","cursor-pointer","transition-all","duration-300","hover:from-gray-700","hover:to-green-800","hover:shadow-lg","hover:-translate-y-0.5","overflow-hidden","relative",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"sidebar-btn",3,"click","routerLink"],[1,"alert","alert-danger"],[1,"text-danger","small"],[4,"ngIf"],[3,"value"],[3,"ngValue"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,t){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"h3"),o(3,"Admin Portal"),e(),m(4,Q,3,6,"button",2),e(),p(5,"br")(6,"br"),i(7,"div",3)(8,"div",4)(9,"h2"),o(10,"Register New User"),e(),i(11,"div",5)(12,"span",6),o(13,"Welcome, Admin"),e(),i(14,"div",7),o(15,"A"),e(),i(16,"a",8),x("click",function(){return t.logout()}),o(17,"Logout"),e()()(),i(18,"div",9)(19,"div",10),m(20,X,2,1,"div",11),i(21,"form",12),x("ngSubmit",function(){return t.onSubmit()}),i(22,"div",13)(23,"div",14)(24,"label",15),o(25,"Full Name*"),e(),p(26,"input",16),m(27,Z,2,0,"div",17),e(),i(28,"div",14)(29,"label",18),o(30,"Email*"),e(),p(31,"input",19),m(32,ne,3,2,"div",17),e()(),i(33,"div",13)(34,"div",14)(35,"label",20),o(36,"Temporary Password*"),e(),p(37,"input",21),m(38,re,2,0,"div",17),e(),i(39,"div",14)(40,"label",22),o(41,"Role*"),e(),i(42,"select",23)(43,"option",24),o(44,"Select a role"),e(),m(45,ie,2,2,"option",25),e(),m(46,oe,2,0,"div",17),e()(),i(47,"div",13)(48,"div",26)(49,"label",27),o(50,"Title"),e(),p(51,"input",28),e(),i(52,"div",26)(53,"label",29),o(54,"Directorate"),e(),p(55,"input",30),e(),i(56,"div",26)(57,"label",31),o(58,"Unit"),e(),p(59,"input",32),e()(),i(60,"div",33)(61,"label",34),o(62,"Reports To (Supervisor)"),e(),i(63,"select",35)(64,"option",36),o(65,"Select a supervisor"),e(),m(66,ae,2,2,"option",37),e()(),i(67,"button",38),m(68,le,1,0,"span",39),o(69),e()()()()()()),n&2){let d,g,f,u;l(4),s("ngForOf",t.sidebarItems),l(16),s("ngIf",t.errorMessage),l(),s("formGroup",t.userForm),l(6),s("ngIf",((d=t.userForm.get("name"))==null?null:d.touched)&&((d=t.userForm.get("name"))==null?null:d.invalid)),l(5),s("ngIf",((g=t.userForm.get("email"))==null?null:g.touched)&&((g=t.userForm.get("email"))==null?null:g.invalid)),l(6),s("ngIf",((f=t.userForm.get("password"))==null?null:f.touched)&&((f=t.userForm.get("password"))==null?null:f.invalid)),l(5),s("ngValue",null),l(2),s("ngForOf",t.roles),l(),s("ngIf",((u=t.userForm.get("role"))==null?null:u.touched)&&((u=t.userForm.get("role"))==null?null:u.invalid)),l(18),s("ngValue",null),l(2),s("ngForOf",t.reportsToUsers),l(),s("disabled",t.userForm.invalid||t.loading),l(),s("ngIf",t.loading),l(),_(" ",t.loading?"Registering...":"Register User"," ")}},dependencies:[F,k,E,B,D,L,H,V,G,z,A,q,j,I,N,T],styles:['.dashboard-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.sidebar[_ngcontent-%COMP%]{width:280px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:30px 20px;box-shadow:4px 0 15px #0000001a;position:fixed;height:100vh;left:0;top:0;overflow-y:auto;z-index:100}.sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 30px;font-size:1.5rem;font-weight:700;text-align:center;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)}.sidebar-btn[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:15px 20px;margin-bottom:10px;background:#ffffff1a;border:none;border-radius:12px;color:#fff;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;text-decoration:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.sidebar-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:translate(5px);box-shadow:0 4px 12px #0003}.sidebar-btn.active[_ngcontent-%COMP%]{background:#ffffff40;box-shadow:0 4px 12px #0000004d;transform:translate(5px)}.sidebar-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;font-size:1.2rem;width:20px;text-align:center}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:280px;padding:30px;background:#f8f9fa;min-height:100vh}.content-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e9ecef}.content-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:2rem;font-weight:600}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:12px 20px;background:linear-gradient(135deg,#fff,#f8f9fa);border-radius:16px;box-shadow:0 4px 12px #00000014;border:1px solid rgba(0,0,0,.06);position:relative;transition:all .3s ease}.auth-section[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0000001f}.user-greeting[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1rem;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.user-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;cursor:pointer;transition:all .3s ease;position:relative;border:2px solid rgba(255,255,255,.3)}.user-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #667eea66}.user-avatar[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);z-index:-1;opacity:0;transition:opacity .3s ease}.user-avatar[_ngcontent-%COMP%]:hover:before{opacity:1}.btn-signin[_ngcontent-%COMP%]{padding:10px 18px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block;position:relative;overflow:hidden}.btn-signin[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-signin[_ngcontent-%COMP%]:hover:before{left:100%}.btn-signin[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6fd8,#6a4190);transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.view-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:30px;box-shadow:0 4px 20px #00000014;border:1px solid rgba(0,0,0,.05)}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:12px 16px;font-size:1rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;outline:none}.form-select[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:12px 16px;font-size:1rem;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;outline:none}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:12px 24px;font-size:1rem;font-weight:600;color:#fff;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn-primary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-primary[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a6fd8,#6a4190);transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]:disabled:before{display:none}.alert[_ngcontent-%COMP%]{border-radius:8px;padding:16px 20px;margin-bottom:20px;border:1px solid transparent}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}.small[_ngcontent-%COMP%]{font-size:.875rem}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{position:static;width:100%;height:auto;padding:20px}.main-content[_ngcontent-%COMP%]{margin-left:0;padding:20px}.content-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.auth-section[_ngcontent-%COMP%]{justify-content:center}.row[_ngcontent-%COMP%]{margin-bottom:0}.mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}}']})};export{Y as UserRegistrationComponent};
