import{a as Q}from"./chunk-UDV7FG2N.js";import{a as z}from"./chunk-QTJP277R.js";import{c as N,e as j,h as $,q as U}from"./chunk-3CQ75ST4.js";import{a as q}from"./chunk-N5RQHMOU.js";import{$ as t,Aa as M,Ba as P,Ha as O,J as o,Ja as k,Q as _,R as y,Ta as I,Ua as R,W as f,Wa as V,_ as c,_a as A,aa as e,ba as s,ia as w,ja as g,ka as m,mb as T,qb as F,ra as C,sa as x,ta as D,ua as i,v as b,va as p,w as u,wa as v,xa as S,za as E}from"./chunk-ZQSPQ25S.js";function W(a,n){if(a&1&&(t(0,"div",32)(1,"div",33)(2,"div",34),s(3,"i"),e(),t(4,"div",35)(5,"h3",36),i(6),e(),t(7,"p",37),i(8),e()()()()),a&2){let r=n.$implicit,l=m(2);o(2),C("background",l.getGradient(r.color)),o(),D(r.icon),o(3),p(r.value),o(2),p(r.title)}}function G(a,n){if(a&1){let r=w();t(0,"tr",38)(1,"td",39),i(2),e(),t(3,"td",39),i(4),e(),t(5,"td",39),i(6),e(),t(7,"td",39),i(8),O(9,"date"),e(),t(10,"td",40)(11,"button",41),g("click",function(){let d=b(r).$implicit,h=m(2);return u(h.openApprovalForm(d))}),i(12,"Final Review"),e()()()}if(a&2){let r=n.$implicit;o(2),p(r.title),o(2),p(r.submitterUnit),o(2),p(r.managerName),o(2),p(k(9,4,r.submittedDate,"mediumDate"))}}function B(a,n){a&1&&(t(0,"tr")(1,"td",42),i(2,"\u2705 The organization is running smoothly. No critical approvals pending."),e()())}function J(a,n){if(a&1&&(t(0,"div")(1,"h3",19),i(2,"Key Organizational Metrics"),e(),t(3,"div",20),f(4,W,9,6,"div",21),e(),t(5,"div",22)(6,"div",23),s(7,"i",24),i(8),e(),t(9,"div",25)(10,"div",26)(11,"table",27)(12,"thead",28)(13,"tr")(14,"th",29),i(15,"Report Title"),e(),t(16,"th",29),i(17,"Unit"),e(),t(18,"th",29),i(19,"Manager Review"),e(),t(20,"th",29),i(21,"Date Sent"),e(),t(22,"th",29),i(23,"Action"),e()()(),t(24,"tbody",30),f(25,G,13,7,"tr",31)(26,B,3,0,"tr",18),e()()()()()()),a&2){let r=m();o(4),c("ngForOf",r.metrics),o(4),v(" High Priority: Final Sign-Off Queue (",r.approvalQueue.length,") "),o(17),c("ngForOf",r.approvalQueue),o(),c("ngIf",r.approvalQueue.length===0)}}function K(a,n){if(a&1){let r=w();t(0,"div",45)(1,"div",46),s(2,"i",47),i(3),e(),t(4,"div",25)(5,"div",48)(6,"p")(7,"strong",49),i(8,"Submitted by:"),e(),i(9),e(),t(10,"p")(11,"strong",49),i(12,"Manager Reviewer:"),e(),i(13),e()(),t(14,"div",50)(15,"label",51),i(16,"Director's Rationale (Required for Rejection):"),e(),t(17,"textarea",52),P("ngModelChange",function(d){b(r);let h=m(2);return M(h.approvalComment,d)||(h.approvalComment=d),u(d)}),e()(),t(18,"div",53)(19,"button",54),g("click",function(){b(r);let d=m(2);return u(d.processFinalApproval("reject"))}),s(20,"i",55),i(21," Final Reject "),e(),t(22,"button",56),g("click",function(){b(r);let d=m(2);return u(d.processFinalApproval("approve"))}),s(23,"i",57),i(24," Final Approve "),e()()()()}if(a&2){let r=m(2);o(3),v(" FINAL JUDGEMENT: ",r.selectedReport.title," "),o(6),S(" ",r.selectedReport.submitterName," (",r.selectedReport.submitterUnit,")"),o(4),v(" ",r.selectedReport.managerName),o(4),E("ngModel",r.approvalComment)}}function H(a,n){a&1&&(t(0,"div",58),s(1,"i",59),t(2,"p",60),i(3,"Select a report from the table above to proceed with final approval or rejection."),e()())}function Y(a,n){if(a&1&&(t(0,"div"),f(1,K,25,5,"div",43)(2,H,4,0,"div",44),e()),a&2){let r=m();o(),c("ngIf",r.selectedReport),o(),c("ngIf",!r.selectedReport)}}function X(a,n){if(a&1&&(t(0,"tr",38)(1,"td",64),i(2),e(),t(3,"td",65),i(4),e(),t(5,"td",39),s(6,"i",66),i(7," 4% increase from last quarter "),e()()),a&2){let r=n.$implicit;o(2),p(r.title),o(2),p(r.value)}}function Z(a,n){if(a&1&&(t(0,"div")(1,"div",61)(2,"div",23),s(3,"i",62),i(4," Detailed Performance Indicators "),e(),t(5,"div",25)(6,"div",26)(7,"table",27)(8,"thead",28)(9,"tr")(10,"th",29),i(11,"Metric"),e(),t(12,"th",29),i(13,"Value"),e(),t(14,"th",29),i(15,"Trend (Mock)"),e()()(),t(16,"tbody",30),f(17,X,8,2,"tr",31),e()()(),t(18,"p",63),i(19,"Note: All trends are mock data and would require integration with a full analytics service."),e()()()()),a&2){let r=m();o(17),c("ngForOf",r.metrics)}}function ee(a,n){a&1&&(t(0,"div")(1,"div",67),s(2,"app-change-password"),e()())}var L=class a{constructor(n,r,l){this.authService=n;this.reportService=r;this.router=l}activeView="dashboard";approvalQueue=[];metrics=[];selectedReport=null;approvalComment="";ngOnInit(){this.authService.isAuthenticated()&&this.authService.getUserId()&&this.loadDashboardData(),this.authService.authState$.subscribe(n=>{n&&this.authService.getUserId()?this.loadDashboardData():(this.approvalQueue=[],this.metrics=[])})}get userName(){return this.authService.getFullName()}logout(){this.authService.logout(),this.router.navigate(["/login"])}getUserInitials(){let n=this.userName;return n?n.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,3):"D"}getGradient(n){let r={primary:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",info:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",success:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",warning:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"};return r[n]||r.primary}setActiveView(n){this.activeView=n}getViewTitle(){return{dashboard:"Executive Overview",queue:"Final Approval Queue",metrics:"Performance Metrics"}[this.activeView]||"Director Portal"}loadDashboardData(){this.reportService.getDirectorQueue().subscribe(n=>{this.approvalQueue=n}),this.reportService.getDirectorMetrics().subscribe(n=>{this.metrics=n})}openApprovalForm(n){this.selectedReport=n,this.approvalComment="",this.setActiveView("queue")}processFinalApproval(n){if(!this.selectedReport)return;let r=this.selectedReport.id;if(n==="approve")this.reportService.directorApproveReport(r,this.approvalComment).subscribe({next:()=>{alert(`Report ${r} successfully ${n}d.`),this.selectedReport=null,this.loadDashboardData(),this.setActiveView("dashboard")},error:l=>{console.error(`${n} failed:`,l),alert(`Failed to process ${n}.`)}});else{if(!this.approvalComment||this.approvalComment.length<10){alert("Director-level rejection requires a detailed and substantial reason.");return}this.reportService.directorRejectReport(r,this.approvalComment).subscribe({next:()=>{alert(`Report ${r} successfully ${n}d.`),this.selectedReport=null,this.loadDashboardData(),this.setActiveView("dashboard")},error:l=>{console.error(`${n} failed:`,l),alert(`Failed to process ${n}.`)}})}}static \u0275fac=function(r){return new(r||a)(_(q),_(z),_(T))};static \u0275cmp=y({type:a,selectors:[["app-director-dashboard"]],decls:34,vars:15,consts:[[1,"flex","min-h-screen","bg-gradient-to-br","from-gray-50","to-gray-100"],[1,"w-72","bg-gradient-to-br","from-gray-600","to-green-700","text-white","p-8","shadow-xl","fixed","h-full","left-0","top-0","overflow-y-auto","z-50"],[1,"text-xl","font-bold","mb-8","text-center","text-white","drop-shadow-lg"],[1,"flex","items-center","w-full","px-5","py-4","mb-3","bg-white/10","border","border-white/20","rounded-xl","text-white","font-medium","cursor-pointer","transition-all","duration-300","hover:bg-white/20","hover:translate-x-1","hover:shadow-lg","backdrop-blur-sm",3,"click"],[1,"fas","fa-chart-bar","mr-4","text-xl","w-5","text-center"],[1,"fas","fa-gavel","mr-4","text-xl","w-5","text-center"],[1,"fas","fa-rocket","mr-4","text-xl","w-5","text-center"],[1,"fas","fa-key","mr-4","text-xl","w-5","text-center"],[1,"flex-1","ml-72","p-8","bg-gray-50","min-h-screen"],[1,"flex","justify-between","items-center","mb-8","pb-5","border-b-2","border-gray-200"],[1,"text-3xl","font-semibold","text-gray-800"],[1,"flex","items-center","gap-4","px-6","py-4","bg-white","rounded-2xl","shadow-lg","border","border-gray-100","transition-all","duration-300","hover:shadow-xl","hover:-translate-y-1"],[1,"text-gray-700","font-semibold","bg-gradient-to-r","from-gray-600","to-green-700","bg-clip-text","text-transparent"],[1,"w-11","h-11","rounded-full","bg-gradient-to-r","from-gray-600","to-green-700","text-white","flex","items-center","justify-center","font-bold","cursor-pointer","transition-all","duration-300","hover:scale-110","shadow-md","border-2","border-white/30"],[1,"px-5","py-2.5","bg-gradient-to-r","from-gray-600","to-green-700","text-white","border-none","rounded-xl","font-semibold","cursor-pointer","transition-all","duration-300","hover:from-gray-700","hover:to-green-800","hover:shadow-lg","hover:-translate-y-0.5","overflow-hidden","relative",3,"click"],[1,"relative","z-10"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-white/20","to-transparent","-translate-x-full","transition-transform","duration-700","hover:translate-x-full"],[1,"bg-white","rounded-2xl","p-8","shadow-lg","border","border-gray-100"],[4,"ngIf"],[1,"text-2xl","font-semibold","text-gray-800","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","mb-10"],["class","bg-white p-6 rounded-2xl shadow-lg border border-gray-100 transition-all duration-300 hover:shadow-xl hover:-translate-y-2",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden","mt-10"],[1,"bg-gradient-to-r","from-gray-500","to-green-600","text-white","px-6","py-4"],[1,"fas","fa-exclamation-circle","mr-3"],[1,"p-6"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100"],[1,"px-6","py-3","text-left","font-semibold","text-gray-800","text-sm","uppercase","tracking-wider"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-200",4,"ngFor","ngForOf"],[1,"bg-white","p-6","rounded-2xl","shadow-lg","border","border-gray-100","transition-all","duration-300","hover:shadow-xl","hover:-translate-y-2"],[1,"flex","items-center"],[1,"w-16","h-16","rounded-xl","flex","items-center","justify-center","mr-6","text-white","text-2xl"],[1,"flex-1"],[1,"text-3xl","font-bold","text-gray-800","mb-1"],[1,"text-gray-600","font-medium"],[1,"hover:bg-gray-50","transition-colors","duration-200"],[1,"px-6","py-4","text-gray-700"],[1,"px-6","py-4"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","font-medium","hover:bg-red-700","transition-colors","duration-200",3,"click"],["colspan","5",1,"px-6","py-8","text-center","text-gray-500"],["class","bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden mb-6",4,"ngIf"],["class","bg-blue-50 border border-blue-200 rounded-2xl p-6 text-center",4,"ngIf"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden","mb-6"],[1,"bg-gradient-to-r","from-red-600","to-orange-600","text-white","px-6","py-4"],[1,"fas","fa-gavel","mr-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],[1,"text-gray-700"],[1,"mb-6"],["for","comment",1,"block","text-gray-700","font-semibold","mb-2"],["id","comment","rows","5","placeholder","Enter reason for final rejection or formal comment for approval (optional).",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-transparent","resize-vertical",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-4"],[1,"px-6","py-3","bg-yellow-600","text-white","rounded-lg","font-medium","hover:bg-yellow-700","transition-colors","duration-200","flex","items-center",3,"click"],[1,"fas","fa-ban","mr-2"],[1,"px-6","py-3","bg-green-600","text-white","rounded-lg","font-medium","hover:bg-green-700","transition-colors","duration-200","flex","items-center",3,"click"],[1,"fas","fa-stamp","mr-2"],[1,"bg-blue-50","border","border-blue-200","rounded-2xl","p-6","text-center"],[1,"fas","fa-info-circle","text-blue-600","text-2xl","mb-2"],[1,"text-blue-800","font-medium"],[1,"bg-white","rounded-2xl","shadow-lg","border","border-gray-100","overflow-hidden"],[1,"fas","fa-chart-line","mr-3"],[1,"text-gray-500","mt-4","text-sm","italic"],[1,"px-6","py-4","text-gray-700","font-medium"],[1,"px-6","py-4","text-gray-700","font-bold"],[1,"fas","fa-arrow-up","text-green-600","mr-2"],[1,"bg-white","rounded-2xl","p-6","shadow-lg","border","border-gray-100"]],template:function(r,l){r&1&&(t(0,"div",0)(1,"div",1)(2,"h3",2),i(3,"Director Portal"),e(),t(4,"button",3),g("click",function(){return l.setActiveView("dashboard")}),s(5,"i",4),i(6," Overview "),e(),t(7,"button",3),g("click",function(){return l.setActiveView("queue")}),s(8,"i",5),i(9," Final Approvals "),e(),t(10,"button",3),g("click",function(){return l.setActiveView("metrics")}),s(11,"i",6),i(12," Performance KPIs "),e(),t(13,"button",3),g("click",function(){return l.setActiveView("change-password")}),s(14,"i",7),i(15," Change Password "),e()(),t(16,"div",8)(17,"div",9)(18,"h2",10),i(19),e(),t(20,"div",11)(21,"span",12),i(22),e(),t(23,"div",13),i(24),e(),t(25,"a",14),g("click",function(){return l.logout()}),t(26,"span",15),i(27,"Logout"),e(),s(28,"span",16),e()()(),t(29,"div",17),f(30,J,27,4,"div",18)(31,Y,3,2,"div",18)(32,Z,20,1,"div",18)(33,ee,3,0,"div",18),e()()()),r&2&&(o(4),x("bg-white/25",l.activeView==="dashboard"),o(3),x("bg-white/25",l.activeView==="queue"),o(3),x("bg-white/25",l.activeView==="metrics"),o(3),x("bg-white/25",l.activeView==="change-password"),o(6),p(l.getViewTitle()),o(3),v("Welcome, ",l.userName),o(2),p(l.getUserInitials()),o(6),c("ngIf",l.activeView==="dashboard"),o(),c("ngIf",l.activeView==="queue"),o(),c("ngIf",l.activeView==="metrics"),o(),c("ngIf",l.activeView==="change-password"))},dependencies:[A,I,R,F,U,N,j,$,Q,V],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:linear-gradient(135deg,#e9ecef,#adb5bd)}.sidebar[_ngcontent-%COMP%]{width:280px;background:linear-gradient(135deg,#343a40,#212529);color:#fff;padding:30px 20px;box-shadow:4px 0 15px #0003;position:fixed;height:100vh;left:0;top:0;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-shadow:0 2px 4px rgba(0,0,0,.5);color:#ffc107}.sidebar-btn[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:15px 20px;margin-bottom:10px;background:#ffffff0d;border:none;border-radius:12px;color:#fff;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1)}.sidebar-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;transform:translate(5px)}.sidebar-btn.active[_ngcontent-%COMP%]{background:#ffffff40;transform:translate(5px);color:#ffc107}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:280px;padding:30px;background:#f8f9fa;min-height:100vh}.content-header[_ngcontent-%COMP%]{border-bottom:2px solid #ced4da}.auth-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f1f1f1)}.user-greeting[_ngcontent-%COMP%]{color:#dc3545}.user-avatar[_ngcontent-%COMP%], .btn-signin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#bd2130)}.btn-signin[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#bd2130,#a71d2a)}.view-content[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08)}.stats-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:25px;margin-bottom:40px}.stat-card[_ngcontent-%COMP%]{background:#fff;padding:25px;border-radius:12px;box-shadow:0 6px 16px #0000001a;border-left:5px solid;display:flex;align-items:center;transition:all .3s ease}.stat-card.border-primary[_ngcontent-%COMP%]{border-left-color:#007bff}.stat-card.border-info[_ngcontent-%COMP%]{border-left-color:#17a2b8}.stat-card.border-success[_ngcontent-%COMP%]{border-left-color:#28a745}.stat-card.border-warning[_ngcontent-%COMP%]{border-left-color:#ffc107}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #00000026}.stat-icon[_ngcontent-%COMP%]{width:55px;height:55px;border-radius:8px;font-size:1.6rem;color:#fff}.stat-icon.bg-primary[_ngcontent-%COMP%]{background:#007bff}.stat-icon.bg-info[_ngcontent-%COMP%]{background:#17a2b8}.stat-icon.bg-success[_ngcontent-%COMP%]{background:#28a745}.stat-icon.bg-warning[_ngcontent-%COMP%]{background:#ffc107}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.2rem}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#6c757d}.card[_ngcontent-%COMP%]{border:1px solid #dee2e6}.card-header.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dc3545,#bd2130)!important;font-weight:700}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{position:static;width:100%;height:auto}.main-content[_ngcontent-%COMP%]{margin-left:0;padding:20px}.stats-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.content-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.auth-section[_ngcontent-%COMP%]{justify-content:center}}"]})};export{L as DirectorDashboardComponent};
